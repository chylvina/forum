var addToHomeConfig={animationIn:"bubble",animationOut:"drop",lifespan:2e4,expire:2,touchIcon:true};var addToHome=function(w){var nav=w.navigator,isIDevice="platform"in nav&&/iphone|ipod|ipad/gi.test(nav.platform),isIPad,isRetina,isSafari,isStandalone,OSVersion,startX=0,startY=0,lastVisit=0,isExpired,isSessionActive,isReturningVisitor,balloon,overrideChecks,positionInterval,closeTimeout,options={autostart:true,returningVisitor:false,animationIn:"drop",animationOut:"fade",startDelay:2e3,lifespan:15e3,bottomOffset:14,expire:0,message:"",touchIcon:false,arrow:true,hookOnLoad:true,closeButton:true,iterations:100},intl={ar:'<span dir="rtl">قم بتثبيت هذا التطبيق على <span dir="ltr">%device:</span>انقر<span dir="ltr">%icon</span> ،<strong>ثم اضفه الى الشاشة الرئيسية.</strong></span>',ca_es:"Per instal·lar aquesta aplicació al vostre %device premeu %icon i llavors <strong>Afegir a pantalla d'inici</strong>.",cs_cz:"Pro instalaci aplikace na Váš %device, stiskněte %icon a v nabídce <strong>Přidat na plochu</strong>.",da_dk:"Tilføj denne side til din %device: tryk på %icon og derefter <strong>Føj til hjemmeskærm</strong>.",de_de:"Installieren Sie diese App auf Ihrem %device: %icon antippen und dann <strong>Zum Home-Bildschirm</strong>.",el_gr:"Εγκαταστήσετε αυτήν την Εφαρμογή στήν συσκευή σας %device: %icon μετά πατάτε <strong>Προσθήκη σε Αφετηρία</strong>.",en_us:"Install this web app on your %device: tap %icon and then <strong>Add to Home Screen</strong>.",es_es:"Para instalar esta app en su %device, pulse %icon y seleccione <strong>Añadir a pantalla de inicio</strong>.",fi_fi:"Asenna tämä web-sovellus laitteeseesi %device: paina %icon ja sen jälkeen valitse <strong>Lisää Koti-valikkoon</strong>.",fr_fr:"Ajoutez cette application sur votre %device en cliquant sur %icon, puis <strong>Ajouter à l'écran d'accueil</strong>.",he_il:'<span dir="rtl">התקן אפליקציה זו על ה-%device שלך: הקש %icon ואז <strong>הוסף למסך הבית</strong>.</span>',hr_hr:"Instaliraj ovu aplikaciju na svoj %device: klikni na %icon i odaberi <strong>Dodaj u početni zaslon</strong>.",hu_hu:"Telepítse ezt a web-alkalmazást az Ön %device-jára: nyomjon a %icon-ra majd a <strong>Főképernyőhöz adás</strong> gombra.",it_it:"Installa questa applicazione sul tuo %device: premi su %icon e poi <strong>Aggiungi a Home</strong>.",ja_jp:"このウェブアプリをあなたの%deviceにインストールするには%iconをタップして<strong>ホーム画面に追加</strong>を選んでください。",ko_kr:'%device에 웹앱을 설치하려면 %icon을 터치 후 "홈화면에 추가"를 선택하세요',nb_no:"Installer denne appen på din %device: trykk på %icon og deretter <strong>Legg til på Hjem-skjerm</strong>",nl_nl:"Installeer deze webapp op uw %device: tik %icon en dan <strong>Voeg toe aan beginscherm</strong>.",pl_pl:"Aby zainstalować tę aplikacje na %device: naciśnij %icon a następnie <strong>Dodaj jako ikonę</strong>.",pt_br:"Instale este aplicativo em seu %device: aperte %icon e selecione <strong>Adicionar à Tela Inicio</strong>.",pt_pt:"Para instalar esta aplicação no seu %device, prima o %icon e depois o <strong>Adicionar ao ecrã principal</strong>.",ru_ru:"Установите это веб-приложение на ваш %device: нажмите %icon, затем <strong>Добавить в «Домой»</strong>.",sv_se:"Lägg till denna webbapplikation på din %device: tryck på %icon och därefter <strong>Lägg till på hemskärmen</strong>.",th_th:"ติดตั้งเว็บแอพฯ นี้บน %device ของคุณ: แตะ %icon และ <strong>เพิ่มที่หน้าจอโฮม</strong>",tr_tr:"Bu uygulamayı %device'a eklemek için %icon simgesine sonrasında <strong>Ana Ekrana Ekle</strong> düğmesine basın.",uk_ua:"Встановіть цей веб сайт на Ваш %device: натисніть %icon, а потім <strong>На початковий екран</strong>.",zh_cn:"您可以将此应用程式安装到您的 %device 上。请按 %icon 然后点选<strong>添加至主屏幕</strong>。",zh_tw:"您可以將此應用程式安裝到您的 %device 上。請按 %icon 然後點選<strong>加入主畫面螢幕</strong>。"};function init(){if(!isIDevice)return;var now=Date.now(),i;if(w.addToHomeConfig){for(i in w.addToHomeConfig){options[i]=w.addToHomeConfig[i]}}if(!options.autostart)options.hookOnLoad=false;isIPad=/ipad/gi.test(nav.platform);isRetina=w.devicePixelRatio&&w.devicePixelRatio>1;isSafari=/Safari/i.test(nav.appVersion)&&!/CriOS/i.test(nav.appVersion);isStandalone=nav.standalone;OSVersion=nav.appVersion.match(/OS (\d+_\d+)/i);OSVersion=OSVersion&&OSVersion[1]?+OSVersion[1].replace("_","."):0;lastVisit=+w.localStorage.getItem("addToHome");isSessionActive=w.sessionStorage.getItem("addToHomeSession");isReturningVisitor=options.returningVisitor?lastVisit&&lastVisit+28*24*60*60*1e3>now:true;if(!lastVisit)lastVisit=now;isExpired=isReturningVisitor&&lastVisit<=now;if(options.hookOnLoad)w.addEventListener("load",loaded,false);else if(!options.hookOnLoad&&options.autostart)loaded()}function loaded(){w.removeEventListener("load",loaded,false);if(!isReturningVisitor)w.localStorage.setItem("addToHome",Date.now());else if(options.expire&&isExpired)w.localStorage.setItem("addToHome",Date.now()+options.expire*6e4);if(!overrideChecks&&(!isSafari||!isExpired||isSessionActive||isStandalone||!isReturningVisitor))return;var touchIcon="",platform=nav.platform.split(" ")[0],language=nav.language.replace("-","_");balloon=document.createElement("div");balloon.id="addToHomeScreen";balloon.style.cssText+="left:-9999px;-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);position:"+(OSVersion<5?"absolute":"fixed");if(options.message in intl){language=options.message;options.message=""}if(options.message===""){options.message=language in intl?intl[language]:intl["en_us"]}if(options.touchIcon){touchIcon=isRetina?document.querySelector('head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon]'):document.querySelector('head link[rel^=apple-touch-icon][sizes="57x57"],head link[rel^=apple-touch-icon]');if(touchIcon){touchIcon='<span style="background-image:url('+touchIcon.href+')" class="addToHomeTouchIcon"></span>'}}balloon.className=(isIPad?"addToHomeIpad":"addToHomeIphone")+(touchIcon?" addToHomeWide":"");balloon.innerHTML=touchIcon+options.message.replace("%device",platform).replace("%icon",OSVersion>=4.2?'<span class="addToHomeShare"></span>':'<span class="addToHomePlus">+</span>')+(options.arrow?'<span class="addToHomeArrow"></span>':"")+(options.closeButton?'<span class="addToHomeClose">×</span>':"");document.body.appendChild(balloon);if(options.closeButton)balloon.addEventListener("click",clicked,false);if(!isIPad&&OSVersion>=6)window.addEventListener("orientationchange",orientationCheck,false);setTimeout(show,options.startDelay)}function show(){var duration,iPadXShift=208;if(isIPad){if(OSVersion<5){startY=w.scrollY;startX=w.scrollX}else if(OSVersion<6){iPadXShift=160}balloon.style.top=startY+options.bottomOffset+"px";balloon.style.left=startX+iPadXShift-Math.round(balloon.offsetWidth/2)+"px";switch(options.animationIn){case"drop":duration="0.6s";balloon.style.webkitTransform="translate3d(0,"+-(w.scrollY+options.bottomOffset+balloon.offsetHeight)+"px,0)";break;case"bubble":duration="0.6s";balloon.style.opacity="0";balloon.style.webkitTransform="translate3d(0,"+(startY+50)+"px,0)";break;default:duration="1s";balloon.style.opacity="0"}}else{startY=w.innerHeight+w.scrollY;if(OSVersion<5){startX=Math.round((w.innerWidth-balloon.offsetWidth)/2)+w.scrollX;balloon.style.left=startX+"px";balloon.style.top=startY-balloon.offsetHeight-options.bottomOffset+"px"}else{balloon.style.left="50%";balloon.style.marginLeft=-Math.round(balloon.offsetWidth/2)-(w.orientation%180&&OSVersion>=6?40:0)+"px";balloon.style.bottom=options.bottomOffset+"px"}switch(options.animationIn){case"drop":duration="1s";balloon.style.webkitTransform="translate3d(0,"+-(startY+options.bottomOffset)+"px,0)";break;case"bubble":duration="0.6s";balloon.style.webkitTransform="translate3d(0,"+(balloon.offsetHeight+options.bottomOffset+50)+"px,0)";break;default:duration="1s";balloon.style.opacity="0"}}balloon.offsetHeight;balloon.style.webkitTransitionDuration=duration;balloon.style.opacity="1";balloon.style.webkitTransform="translate3d(0,0,0)";balloon.addEventListener("webkitTransitionEnd",transitionEnd,false);closeTimeout=setTimeout(close,options.lifespan)}function manualShow(override){if(!isIDevice||balloon)return;overrideChecks=override;loaded()}function close(){clearInterval(positionInterval);clearTimeout(closeTimeout);closeTimeout=null;if(!balloon)return;var posY=0,posX=0,opacity="1",duration="0";if(options.closeButton)balloon.removeEventListener("click",clicked,false);if(!isIPad&&OSVersion>=6)window.removeEventListener("orientationchange",orientationCheck,false);if(OSVersion<5){posY=isIPad?w.scrollY-startY:w.scrollY+w.innerHeight-startY;posX=isIPad?w.scrollX-startX:w.scrollX+Math.round((w.innerWidth-balloon.offsetWidth)/2)-startX}balloon.style.webkitTransitionProperty="-webkit-transform,opacity";switch(options.animationOut){case"drop":if(isIPad){duration="0.4s";opacity="0";posY+=50}else{duration="0.6s";posY+=balloon.offsetHeight+options.bottomOffset+50}break;case"bubble":if(isIPad){duration="0.8s";posY-=balloon.offsetHeight+options.bottomOffset+50}else{duration="0.4s";opacity="0";posY-=50}break;default:duration="0.8s";opacity="0"}balloon.addEventListener("webkitTransitionEnd",transitionEnd,false);balloon.style.opacity=opacity;balloon.style.webkitTransitionDuration=duration;balloon.style.webkitTransform="translate3d("+posX+"px,"+posY+"px,0)"}function clicked(){w.sessionStorage.setItem("addToHomeSession","1");isSessionActive=true;close()}function transitionEnd(){balloon.removeEventListener("webkitTransitionEnd",transitionEnd,false);balloon.style.webkitTransitionProperty="-webkit-transform";balloon.style.webkitTransitionDuration="0.2s";if(!closeTimeout){balloon.parentNode.removeChild(balloon);balloon=null;return}if(OSVersion<5&&closeTimeout)positionInterval=setInterval(setPosition,options.iterations)}function setPosition(){var matrix=new WebKitCSSMatrix(w.getComputedStyle(balloon,null).webkitTransform),posY=isIPad?w.scrollY-startY:w.scrollY+w.innerHeight-startY,posX=isIPad?w.scrollX-startX:w.scrollX+Math.round((w.innerWidth-balloon.offsetWidth)/2)-startX;if(posY==matrix.m42&&posX==matrix.m41)return;balloon.style.webkitTransform="translate3d("+posX+"px,"+posY+"px,0)"}function reset(){w.localStorage.removeItem("addToHome");w.sessionStorage.removeItem("addToHomeSession")}function orientationCheck(){balloon.style.marginLeft=-Math.round(balloon.offsetWidth/2)-(w.orientation%180&&OSVersion>=6?40:0)+"px"}init();return{show:manualShow,close:close,reset:reset}}(window);var Handlebars={};!function(Handlebars,undefined){Handlebars.VERSION="1.0.0";Handlebars.COMPILER_REVISION=4;Handlebars.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};Handlebars.helpers={};Handlebars.partials={};var toString=Object.prototype.toString,functionType="[object Function]",objectType="[object Object]";Handlebars.registerHelper=function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn){throw new Handlebars.Exception("Arg not supported with multiple helpers")}Handlebars.Utils.extend(this.helpers,name)}else{if(inverse){fn.not=inverse}this.helpers[name]=fn}};Handlebars.registerPartial=function(name,str){if(toString.call(name)===objectType){Handlebars.Utils.extend(this.partials,name)}else{this.partials[name]=str}};Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2){return undefined}else{throw new Error("Missing helper: '"+arg+"'")}});Handlebars.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(type==="[object Array]"){if(context.length>0){return Handlebars.helpers.each(context,options)}else{return inverse(this)}}else{return fn(context)}});Handlebars.K=function(){};Handlebars.createFrame=Object.create||function(object){Handlebars.K.prototype=object;var obj=new Handlebars.K;Handlebars.K.prototype=null;return obj};Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(level,obj){if(Handlebars.logger.level<=level){var method=Handlebars.logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,obj)}}}};Handlebars.log=function(level,obj){Handlebars.logger.log(level,obj)};Handlebars.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var type=toString.call(context);if(type===functionType){context=context.call(this)}if(options.data){data=Handlebars.createFrame(options.data)}if(context&&typeof context==="object"){if(context instanceof Array){for(var j=context.length;i<j;i++){if(data){data.index=i}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});Handlebars.registerHelper("if",function(conditional,options){var type=toString.call(conditional);if(type===functionType){conditional=conditional.call(this)}if(!conditional||Handlebars.Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});Handlebars.registerHelper("unless",function(conditional,options){return Handlebars.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn})});Handlebars.registerHelper("with",function(context,options){var type=toString.call(context);if(type===functionType){context=context.call(this)}if(!Handlebars.Utils.isEmpty(context))return options.fn(context)});Handlebars.registerHelper("log",function(context,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;Handlebars.log(level,context)});var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}};Handlebars.Exception.prototype=new Error;Handlebars.SafeString=function(string){this.string=string};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;var escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={extend:function(obj,value){for(var key in value){if(value.hasOwnProperty(key)){obj[key]=value[key]}}},escapeExpression:function(string){if(string instanceof Handlebars.SafeString){return string.toString()}else if(string==null||string===false){return""}string=string.toString();if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)},isEmpty:function(value){if(!value&&value!==0){return true}else if(toString.call(value)==="[object Array]"&&value.length===0){return true}else{return false}}};Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];if(data){programWrapper=Handlebars.VM.program(i,fn,data)}else if(!programWrapper){programWrapper=this.programs[i]=Handlebars.VM.program(i,fn)}return programWrapper},merge:function(param,common){var ret=param||common;if(param&&common){ret={};Handlebars.Utils.extend(ret,common);Handlebars.Utils.extend(ret,param)}return ret},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var result=templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data);var compilerInfo=container.compilerInfo||[],compilerRevision=compilerInfo[0]||1,currentRevision=Handlebars.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=Handlebars.REVISION_CHANGES[currentRevision],compilerVersions=Handlebars.REVISION_CHANGES[compilerRevision];throw"Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+")."}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+")."}}return result}},programWithDepth:function(i,fn,data){var args=Array.prototype.slice.call(arguments,3);var program=function(context,options){options=options||{};return fn.apply(this,[context,options.data||data].concat(args))};program.program=i;program.depth=args.length;return program},program:function(i,fn,data){var program=function(context,options){options=options||{};return fn(context,options.data||data)};program.program=i;program.depth=0;return program},noop:function(){return""},invokePartial:function(partial,name,context,helpers,partials,data){var options={helpers:helpers,partials:partials,data:data};if(partial===undefined){throw new Handlebars.Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}else if(!Handlebars.compile){throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}else{partials[name]=Handlebars.compile(partial,{data:data!==undefined});return partials[name](context,options)}}};Handlebars.template=Handlebars.VM.template}(Handlebars);Handlebars.registerHelper("ifCond",function(v1,operator,v2,options){switch(operator){case"==":return v1==v2?options.fn(this):options.inverse(this);break;case"===":return v1===v2?options.fn(this):options.inverse(this);break;case"<":return v1<v2?options.fn(this):options.inverse(this);break;case"<=":return v1<=v2?options.fn(this):options.inverse(this);break;case">":return v1>v2?options.fn(this):options.inverse(this);break;case">=":return v1>=v2?options.fn(this):options.inverse(this);break;default:return options.inverse(this);break}});!function(document){window.MBP=window.MBP||{};MBP.viewportmeta=document.querySelector&&document.querySelector('meta[name="viewport"]');MBP.ua=navigator.userAgent;MBP.scaleFix=function(){if(MBP.viewportmeta&&/iPhone|iPad|iPod/.test(MBP.ua)&&!/Opera Mini/.test(MBP.ua)){MBP.viewportmeta.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0";document.addEventListener("gesturestart",MBP.gestureStart,false)}};MBP.gestureStart=function(){MBP.viewportmeta.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"};MBP.BODY_SCROLL_TOP=false;MBP.getScrollTop=function(){var win=window;var doc=document;return win.pageYOffset||doc.compatMode==="CSS1Compat"&&doc.documentElement.scrollTop||doc.body.scrollTop||0};MBP.hideUrlBar=function(){var win=window;if(!location.hash&&MBP.BODY_SCROLL_TOP!==false){win.scrollTo(0,MBP.BODY_SCROLL_TOP===1?0:1)}};MBP.hideUrlBarOnLoad=function(){var win=window;var doc=win.document;var bodycheck;if(!location.hash&&win.addEventListener){window.scrollTo(0,1);MBP.BODY_SCROLL_TOP=1;bodycheck=setInterval(function(){if(doc.body){clearInterval(bodycheck);MBP.BODY_SCROLL_TOP=MBP.getScrollTop();MBP.hideUrlBar()}},15);win.addEventListener("load",function(){setTimeout(function(){if(MBP.getScrollTop()<20){MBP.hideUrlBar()}},0)})}};MBP.fastButton=function(element,handler,pressedClass){this.handler=handler;this.pressedClass=typeof pressedClass==="undefined"?"pressed":pressedClass;if(element.length&&element.length>1){for(var singleElIdx in element){this.addClickEvent(element[singleElIdx])}}else{this.addClickEvent(element)}};MBP.fastButton.prototype.handleEvent=function(event){event=event||window.event;switch(event.type){case"touchstart":this.onTouchStart(event);break;case"touchmove":this.onTouchMove(event);break;case"touchend":this.onClick(event);break;case"click":this.onClick(event);break}};MBP.fastButton.prototype.onTouchStart=function(event){var element=event.target||event.srcElement;event.stopPropagation();element.addEventListener("touchend",this,false);document.body.addEventListener("touchmove",this,false);this.startX=event.touches[0].clientX;this.startY=event.touches[0].clientY;element.className+=" "+this.pressedClass};MBP.fastButton.prototype.onTouchMove=function(event){if(Math.abs(event.touches[0].clientX-this.startX)>10||Math.abs(event.touches[0].clientY-this.startY)>10){this.reset(event)}};MBP.fastButton.prototype.onClick=function(event){event=event||window.event;var element=event.target||event.srcElement;if(event.stopPropagation){event.stopPropagation()}this.reset(event);this.handler.apply(event.currentTarget,[event]);if(event.type=="touchend"){MBP.preventGhostClick(this.startX,this.startY)}var pattern=new RegExp(" ?"+this.pressedClass,"gi");element.className=element.className.replace(pattern,"")};MBP.fastButton.prototype.reset=function(event){var element=event.target||event.srcElement;rmEvt(element,"touchend",this,false);rmEvt(document.body,"touchmove",this,false);var pattern=new RegExp(" ?"+this.pressedClass,"gi");element.className=element.className.replace(pattern,"")};MBP.fastButton.prototype.addClickEvent=function(element){addEvt(element,"touchstart",this,false);addEvt(element,"click",this,false)};MBP.preventGhostClick=function(x,y){MBP.coords.push(x,y);window.setTimeout(function(){MBP.coords.splice(0,2)},2500)};MBP.ghostClickHandler=function(event){if(!MBP.hadTouchEvent&&MBP.dodgyAndroid){event.stopPropagation();event.preventDefault();return}for(var i=0,len=MBP.coords.length;i<len;i+=2){var x=MBP.coords[i];var y=MBP.coords[i+1];if(Math.abs(event.clientX-x)<25&&Math.abs(event.clientY-y)<25){event.stopPropagation();event.preventDefault()}}};MBP.dodgyAndroid="ontouchstart"in window&&navigator.userAgent.indexOf("Android 2.3")!=-1;if(document.addEventListener){document.addEventListener("click",MBP.ghostClickHandler,true)}addEvt(document.documentElement,"touchstart",function(){MBP.hadTouchEvent=true},false);MBP.coords=[];function addEvt(el,evt,fn,bubble){if("addEventListener"in el){try{el.addEventListener(evt,fn,bubble)}catch(e){if(typeof fn=="object"&&fn.handleEvent){el.addEventListener(evt,function(e){fn.handleEvent.call(fn,e)},bubble)}else{throw e}}}else if("attachEvent"in el){if(typeof fn=="object"&&fn.handleEvent){el.attachEvent("on"+evt,function(){fn.handleEvent.call(fn)})}else{el.attachEvent("on"+evt,fn)}}}function rmEvt(el,evt,fn,bubble){if("removeEventListener"in el){try{el.removeEventListener(evt,fn,bubble)}catch(e){if(typeof fn=="object"&&fn.handleEvent){el.removeEventListener(evt,function(e){fn.handleEvent.call(fn,e)},bubble)}else{throw e}}}else if("detachEvent"in el){if(typeof fn=="object"&&fn.handleEvent){el.detachEvent("on"+evt,function(){fn.handleEvent.call(fn)})}else{el.detachEvent("on"+evt,fn)}}}MBP.autogrow=function(element,lh){function handler(e){var newHeight=this.scrollHeight;var currentHeight=this.clientHeight;if(newHeight>currentHeight){this.style.height=newHeight+3*textLineHeight+"px"}}var setLineHeight=lh?lh:12;var textLineHeight=element.currentStyle?element.currentStyle.lineHeight:getComputedStyle(element,null).lineHeight;textLineHeight=textLineHeight.indexOf("px")==-1?setLineHeight:parseInt(textLineHeight,10);element.style.overflow="hidden";element.addEventListener?element.addEventListener("input",handler,false):element.attachEvent("onpropertychange",handler)};MBP.enableActive=function(){document.addEventListener("touchstart",function(){},false)};MBP.preventScrolling=function(){document.addEventListener("touchmove",function(e){if(e.target.type==="range"){return}e.preventDefault()},false)};MBP.preventZoom=function(){var formFields=document.querySelectorAll("input, select, textarea");var contentString="width=device-width,initial-scale=1,maximum-scale=";var i=0;for(i=0;i<formFields.length;i++){formFields[i].onfocus=function(){MBP.viewportmeta.content=contentString+"1"};formFields[i].onblur=function(){MBP.viewportmeta.content=contentString+"10"}}};MBP.startupImage=function(){var portrait;var landscape;var pixelRatio;var head;var link1;var link2;pixelRatio=window.devicePixelRatio;head=document.getElementsByTagName("head")[0];if(navigator.platform==="iPad"){portrait=pixelRatio===2?"img/startup/startup-tablet-portrait-retina.png":"img/startup/startup-tablet-portrait.png";landscape=pixelRatio===2?"img/startup/startup-tablet-landscape-retina.png":"img/startup/startup-tablet-landscape.png";link1=document.createElement("link");link1.setAttribute("rel","apple-touch-startup-image");link1.setAttribute("media","screen and (orientation: portrait)");link1.setAttribute("href",portrait);head.appendChild(link1);link2=document.createElement("link");link2.setAttribute("rel","apple-touch-startup-image");link2.setAttribute("media","screen and (orientation: landscape)");link2.setAttribute("href",landscape);head.appendChild(link2)}else{portrait=pixelRatio===2?"img/startup/startup-retina.png":"img/startup/startup.png";portrait=screen.height===568?"img/startup/startup-retina-4in.png":portrait;link1=document.createElement("link");link1.setAttribute("rel","apple-touch-startup-image");link1.setAttribute("href",portrait);head.appendChild(link1)}if((navigator.platform==="iPhone"||"iPod")&&screen.height===568){if(MBP.viewportmeta){MBP.viewportmeta.content=MBP.viewportmeta.content.replace(/\bwidth\s*=\s*320\b/,"width=320.1").replace(/\bwidth\s*=\s*device-width\b/,"")}}}}(document);!function(window,doc){var m=Math,dummyStyle=doc.createElement("div").style,vendor=function(){var vendors="t,webkitT,MozT,msT,OT".split(","),t,i=0,l=vendors.length;for(;i<l;i++){t=vendors[i]+"ransform";if(t in dummyStyle){return vendors[i].substr(0,vendors[i].length-1)}}return false}(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transitionProperty=prefixStyle("transitionProperty"),transitionDuration=prefixStyle("transitionDuration"),transformOrigin=prefixStyle("transformOrigin"),transitionTimingFunction=prefixStyle("transitionTimingFunction"),transitionDelay=prefixStyle("transitionDelay"),isAndroid=/android/gi.test(navigator.appVersion),isIDevice=/iphone|ipad/gi.test(navigator.appVersion),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=vendor!==false,hasTransitionEnd=prefixStyle("transition")in dummyStyle,RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",TRNEND_EV=function(){if(vendor===false)return false;var transitionEnd={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return transitionEnd[vendor]}(),nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),translateZ=has3d?" translateZ(0)":"",iScroll=function(el,options){var that=this,i;that.wrapper=typeof el=="object"?el:doc.getElementById(el);that.wrapper.style.overflow="hidden";that.scroller=that.wrapper.children[0];that.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:isAndroid,hideScrollbar:isIDevice,fadeScrollbar:isIDevice&&has3d,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,thresholdX:6,thresholdY:6,stopEventProp:false,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(i in options)that.options[i]=options[i];that.x=that.options.x;that.y=that.options.y;that.options.useTransform=hasTransform&&that.options.useTransform;that.options.hScrollbar=that.options.hScroll&&that.options.hScrollbar;that.options.vScrollbar=that.options.vScroll&&that.options.vScrollbar;that.options.zoom=that.options.useTransform&&that.options.zoom;that.options.useTransition=hasTransitionEnd&&that.options.useTransition;if(that.options.zoom&&isAndroid){translateZ=""}that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+"transform":"top left";that.scroller.style[transitionDuration]="0";that.scroller.style[transformOrigin]="0 0";if(that.options.useTransition)that.scroller.style[transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)";if(that.options.useTransform)that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px)"+translateZ;else that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px";if(that.options.useTransition)that.options.fixedScrollbar=true;that.refresh();that._bind(RESIZE_EV,window);that._bind(START_EV);if(!hasTouch){if(that.options.wheelAction!="none"){that._bind("DOMMouseScroll");that._bind("mousewheel")}}if(that.options.checkDOMChanges)that.checkDOMTime=setInterval(function(){that._checkDOMChanges()},500)};iScroll.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(this.options.stopEventProp){e.preventDefault();e.stopImmediatePropagation();e.stopPropagation()}if(!hasTouch&&e.button!==0)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case"DOMMouseScroll":case"mousewheel":that._wheel(e);break;case TRNEND_EV:that._transitionEnd(e);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(dir){var that=this,bar;if(!that[dir+"Scrollbar"]){if(that[dir+"ScrollbarWrapper"]){if(hasTransform)that[dir+"ScrollbarIndicator"].style[transform]="";that[dir+"ScrollbarWrapper"].parentNode.removeChild(that[dir+"ScrollbarWrapper"]);that[dir+"ScrollbarWrapper"]=null;that[dir+"ScrollbarIndicator"]=null}return}if(!that[dir+"ScrollbarWrapper"]){bar=doc.createElement("div");if(that.options.scrollbarClass)bar.className=that.options.scrollbarClass+dir.toUpperCase();else bar.style.cssText="position:absolute;z-index:100;"+(dir=="h"?"height:7px;bottom:1px;left:2px;right:"+(that.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(that.hScrollbar?"7":"2")+"px;top:2px;right:1px");bar.style.cssText+=";pointer-events:none;"+cssVendor+"transition-property:opacity;"+cssVendor+"transition-duration:"+(that.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(that.options.hideScrollbar?"0":"1");that.wrapper.appendChild(bar);that[dir+"ScrollbarWrapper"]=bar;bar=doc.createElement("div");if(!that.options.scrollbarClass){bar.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+cssVendor+"background-clip:padding-box;"+cssVendor+"box-sizing:border-box;"+(dir=="h"?"height:100%":"width:100%")+";"+cssVendor+"border-radius:3px;border-radius:3px"}bar.style.cssText+=";pointer-events:none;"+cssVendor+"transition-property:"+cssVendor+"transform;"+cssVendor+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+cssVendor+"transition-duration:0;"+cssVendor+"transform: translate(0,0)"+translateZ;
if(that.options.useTransition)bar.style.cssText+=";"+cssVendor+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";that[dir+"ScrollbarWrapper"].appendChild(bar);that[dir+"ScrollbarIndicator"]=bar}if(dir=="h"){that.hScrollbarSize=that.hScrollbarWrapper.clientWidth;that.hScrollbarIndicatorSize=m.max(m.round(that.hScrollbarSize*that.hScrollbarSize/that.scrollerW),8);that.hScrollbarIndicator.style.width=that.hScrollbarIndicatorSize+"px";that.hScrollbarMaxScroll=that.hScrollbarSize-that.hScrollbarIndicatorSize;that.hScrollbarProp=that.hScrollbarMaxScroll/that.maxScrollX}else{that.vScrollbarSize=that.vScrollbarWrapper.clientHeight;that.vScrollbarIndicatorSize=m.max(m.round(that.vScrollbarSize*that.vScrollbarSize/that.scrollerH),8);that.vScrollbarIndicator.style.height=that.vScrollbarIndicatorSize+"px";that.vScrollbarMaxScroll=that.vScrollbarSize-that.vScrollbarIndicatorSize;that.vScrollbarProp=that.vScrollbarMaxScroll/that.maxScrollY}that._scrollbarPos(dir,true)},_resize:function(){var that=this;setTimeout(function(){that.refresh()},isAndroid?200:0)},_pos:function(x,y){if(this.zoomed)return;x=this.hScroll?x:0;y=this.vScroll?y:0;if(this.options.useTransform){this.scroller.style[transform]="translate("+x+"px,"+y+"px) scale("+this.scale+")"+translateZ}else{x=m.round(x);y=m.round(y);this.scroller.style.left=x+"px";this.scroller.style.top=y+"px"}this.x=x;this.y=y;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(dir,hidden){var that=this,pos=dir=="h"?that.x:that.y,size;if(!that[dir+"Scrollbar"])return;pos=that[dir+"ScrollbarProp"]*pos;if(pos<0){if(!that.options.fixedScrollbar){size=that[dir+"ScrollbarIndicatorSize"]+m.round(pos*3);if(size<8)size=8;that[dir+"ScrollbarIndicator"].style[dir=="h"?"width":"height"]=size+"px"}pos=0}else if(pos>that[dir+"ScrollbarMaxScroll"]){if(!that.options.fixedScrollbar){size=that[dir+"ScrollbarIndicatorSize"]-m.round((pos-that[dir+"ScrollbarMaxScroll"])*3);if(size<8)size=8;that[dir+"ScrollbarIndicator"].style[dir=="h"?"width":"height"]=size+"px";pos=that[dir+"ScrollbarMaxScroll"]+(that[dir+"ScrollbarIndicatorSize"]-size)}else{pos=that[dir+"ScrollbarMaxScroll"]}}that[dir+"ScrollbarWrapper"].style[transitionDelay]="0";that[dir+"ScrollbarWrapper"].style.opacity=hidden&&that.options.hideScrollbar?"0":"1";that[dir+"ScrollbarIndicator"].style[transform]="translate("+(dir=="h"?pos+"px,0)":"0,"+pos+"px)")+translateZ},_start:function(e){var that=this,point=hasTouch?e.touches[0]:e,matrix,x,y,c1,c2;if(!that.enabled)return;if(that.options.onBeforeScrollStart)that.options.onBeforeScrollStart.call(that,e);if(that.options.useTransition||that.options.zoom)that._transitionTime(0);that.wrongDirection=null;that.moved=false;that.animating=false;that.zoomed=false;that.distX=0;that.distY=0;that.absDistX=0;that.absDistY=0;that.dirX=0;that.dirY=0;if(that.options.zoom&&hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);that.touchesDistStart=m.sqrt(c1*c1+c2*c2);that.originX=m.abs(e.touches[0].pageX+e.touches[1].pageX-that.wrapperOffsetLeft*2)/2-that.x;that.originY=m.abs(e.touches[0].pageY+e.touches[1].pageY-that.wrapperOffsetTop*2)/2-that.y;if(that.options.onZoomStart)that.options.onZoomStart.call(that,e)}if(that.options.momentum){if(that.options.useTransform){matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,"").split(",");x=+(matrix[12]||matrix[4]);y=+(matrix[13]||matrix[5])}else{x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,"");y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")}if(x!=that.x||y!=that.y){if(that.options.useTransition)that._unbind(TRNEND_EV);else cancelFrame(that.aniTime);that.steps=[];that._pos(x,y);if(that.options.onScrollEnd)that.options.onScrollEnd.call(that)}}that.absStartX=that.x;that.absStartY=that.y;that.startX=that.x;that.startY=that.y;that.pointX=point.pageX;that.pointY=point.pageY;that.startTime=e.timeStamp||Date.now();if(that.options.onScrollStart)that.options.onScrollStart.call(that,e);that._bind(MOVE_EV,window);that._bind(END_EV,window);that._bind(CANCEL_EV,window)},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,c1,c2,scale,timestamp=e.timeStamp||Date.now();if(that.options.onBeforeScrollMove)that.options.onBeforeScrollMove.call(that,e);if(that.options.zoom&&hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);that.touchesDist=m.sqrt(c1*c1+c2*c2);that.zoomed=true;scale=1/that.touchesDistStart*that.touchesDist*this.scale;if(scale<that.options.zoomMin)scale=.5*that.options.zoomMin*Math.pow(2,scale/that.options.zoomMin);else if(scale>that.options.zoomMax)scale=2*that.options.zoomMax*Math.pow(.5,that.options.zoomMax/scale);that.lastScale=scale/this.scale;newX=this.originX-this.originX*that.lastScale+this.x;newY=this.originY-this.originY*that.lastScale+this.y;this.scroller.style[transform]="translate("+newX+"px,"+newY+"px) scale("+scale+")"+translateZ;if(that.options.onZoom)that.options.onZoom.call(that,e);return}that.pointX=point.pageX;that.pointY=point.pageY;if(newX>0||newX<that.maxScrollX){newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX}if(newY>that.minScrollY||newY<that.maxScrollY){newY=that.options.bounce?that.y+deltaY/2:newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY}that.distX+=deltaX;that.distY+=deltaY;that.absDistX=m.abs(that.distX);that.absDistY=m.abs(that.distY);if(that.absDistX<6&&that.absDistY<6){return}if(that.wrongDirection===true){return}if(that.wrongDirection===null&&this.options.hScroll&&!this.options.vScroll){if(that.absDistY>that.absDistX){that.wrongDirection=true;return}else{that.wrongDirection=false}}if(that.wrongDirection===null&&this.options.vScroll&&!this.options.hScroll){if(that.absDistX>that.absDistY){that.wrongDirection=true;return}else{that.wrongDirection=false}}if(that.options.lockDirection){if(that.absDistX>that.absDistY+5){newY=that.y;deltaY=0}else if(that.absDistY>that.absDistX+5){newX=that.x;deltaX=0}}that.moved=true;that._pos(newX,newY);that.dirX=deltaX>0?-1:deltaX<0?1:0;that.dirY=deltaY>0?-1:deltaY<0?1:0;if(that.options.onScrollMove)that.options.onScrollMove.call(that,e)},_end:function(e){if(hasTouch&&e.touches.length!==0)return;var that=this,point=hasTouch?e.changedTouches[0]:e,target,ev,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y,distX,distY,newDuration,snap,scale;that._unbind(MOVE_EV,window);that._unbind(END_EV,window);that._unbind(CANCEL_EV,window);that.wrongDirection=null;if(that.options.onBeforeScrollEnd)that.options.onBeforeScrollEnd.call(that,e);if(that.zoomed){scale=that.scale*that.lastScale;scale=Math.max(that.options.zoomMin,scale);scale=Math.min(that.options.zoomMax,scale);that.lastScale=scale/that.scale;that.scale=scale;that.x=that.originX-that.originX*that.lastScale+that.x;that.y=that.originY-that.originY*that.lastScale+that.y;that.scroller.style[transitionDuration]="200ms";that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px) scale("+that.scale+")"+translateZ;that.zoomed=false;that.refresh();if(that.options.onZoomEnd)that.options.onZoomEnd.call(that,e);return}if(!that.moved){if(hasTouch){if(that.doubleTapTimer&&that.options.zoom){clearTimeout(that.doubleTapTimer);that.doubleTapTimer=null;if(that.options.onZoomStart)that.options.onZoomStart.call(that,e);that.zoom(that.pointX,that.pointY,that.scale==1?that.options.doubleTapZoom:1);if(that.options.onZoomEnd){setTimeout(function(){that.options.onZoomEnd.call(that,e)},200)}}else if(this.options.handleClick){that.doubleTapTimer=setTimeout(function(){that.doubleTapTimer=null;target=point.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!="SELECT"&&target.tagName!="INPUT"&&target.tagName!="TEXTAREA"){ev=doc.createEvent("MouseEvents");ev.initMouseEvent("click",true,true,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._fake=true;target.dispatchEvent(ev)}},that.options.zoom?250:0)}}that._resetPos(400);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return}if(duration<300&&that.options.momentum){momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX;momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0,that.options.bounce?that.wrapperH:0):momentumY;newPosX=that.x+momentumX.dist;newPosY=that.y+momentumY.dist;if(that.x>0&&newPosX>0||that.x<that.maxScrollX&&newPosX<that.maxScrollX)momentumX={dist:0,time:0};if(that.y>that.minScrollY&&newPosY>that.minScrollY||that.y<that.maxScrollY&&newPosY<that.maxScrollY)momentumY={dist:0,time:0}}if(momentumX.dist||momentumY.dist){newDuration=m.max(m.max(momentumX.time,momentumY.time),10);if(that.options.snap){distX=newPosX-that.absStartX;distY=newPosY-that.absStartY;if(m.abs(distX)<that.options.snapThreshold&&m.abs(distY)<that.options.snapThreshold){that.scrollTo(that.absStartX,that.absStartY,200)}else{snap=that._snap(newPosX,newPosY);newPosX=snap.x;newPosY=snap.y;newDuration=m.max(snap.time,newDuration)}}that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return}if(that.options.snap){distX=newPosX-that.absStartX;distY=newPosY-that.absStartY;if(m.abs(distX)<that.options.snapThreshold&&m.abs(distY)<that.options.snapThreshold)that.scrollTo(that.absStartX,that.absStartY,200);else{snap=that._snap(that.x,that.y);if(snap.x!=that.x||snap.y!=that.y)that.scrollTo(snap.x,snap.y,snap.time)}if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return}that._resetPos(200);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e)},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;if(resetX==that.x&&resetY==that.y){if(that.moved){that.moved=false;if(that.options.onScrollEnd)that.options.onScrollEnd.call(that)}if(that.hScrollbar&&that.options.hideScrollbar){if(vendor=="webkit")that.hScrollbarWrapper.style[transitionDelay]="300ms";that.hScrollbarWrapper.style.opacity="0"}if(that.vScrollbar&&that.options.hideScrollbar){if(vendor=="webkit")that.vScrollbarWrapper.style[transitionDelay]="300ms";that.vScrollbarWrapper.style.opacity="0"}return}that.scrollTo(resetX,resetY,time||0)},_wheel:function(e){var that=this,wheelDeltaX,wheelDeltaY,deltaX,deltaY,deltaScale;if("wheelDeltaX"in e){wheelDeltaX=e.wheelDeltaX/12;wheelDeltaY=e.wheelDeltaY/12}else if("wheelDelta"in e){wheelDeltaX=wheelDeltaY=e.wheelDelta/12}else if("detail"in e){wheelDeltaX=wheelDeltaY=-e.detail*3}else{return}if(that.options.wheelAction=="zoom"){deltaScale=that.scale*Math.pow(2,1/3*(wheelDeltaY?wheelDeltaY/Math.abs(wheelDeltaY):0));if(deltaScale<that.options.zoomMin)deltaScale=that.options.zoomMin;if(deltaScale>that.options.zoomMax)deltaScale=that.options.zoomMax;if(deltaScale!=that.scale){if(!that.wheelZoomCount&&that.options.onZoomStart)that.options.onZoomStart.call(that,e);that.wheelZoomCount++;that.zoom(e.pageX,e.pageY,deltaScale,400);setTimeout(function(){that.wheelZoomCount--;if(!that.wheelZoomCount&&that.options.onZoomEnd)that.options.onZoomEnd.call(that,e)},400)}return}deltaX=that.x+wheelDeltaX;deltaY=that.y+wheelDeltaY;if(deltaX>0)deltaX=0;else if(deltaX<that.maxScrollX)deltaX=that.maxScrollX;if(deltaY>that.minScrollY)deltaY=that.minScrollY;else if(deltaY<that.maxScrollY)deltaY=that.maxScrollY;if(that.maxScrollY<0){that.scrollTo(deltaX,deltaY,0)}},_transitionEnd:function(e){var that=this;if(e.target!=that.scroller)return;that._unbind(TRNEND_EV);that._startAni()},_startAni:function(){var that=this,startX=that.x,startY=that.y,startTime=Date.now(),step,easeOut,animate;if(that.animating)return;if(!that.steps.length){that._resetPos(400);return}step=that.steps.shift();if(step.x==startX&&step.y==startY)step.time=0;that.animating=true;that.moved=true;if(that.options.useTransition){that._transitionTime(step.time);that._pos(step.x,step.y);that.animating=false;if(step.time)that._bind(TRNEND_EV);else that._resetPos(0);return}animate=function(){var now=Date.now(),newX,newY;if(now>=startTime+step.time){that._pos(step.x,step.y);that.animating=false;if(that.options.onAnimationEnd)that.options.onAnimationEnd.call(that);that._startAni();return}now=(now-startTime)/step.time-1;easeOut=m.sqrt(1-now*now);newX=(step.x-startX)*easeOut+startX;newY=(step.y-startY)*easeOut+startY;that._pos(newX,newY);if(that.animating)that.aniTime=nextFrame(animate)};animate()},_transitionTime:function(time){time+="ms";this.scroller.style[transitionDuration]=time;if(this.hScrollbar)this.hScrollbarIndicator.style[transitionDuration]=time;if(this.vScrollbar)this.vScrollbarIndicator.style[transitionDuration]=time},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;if(dist>0&&newDist>maxDistUpper){outsideDist=size/(6/(newDist/speed*deceleration));maxDistUpper=maxDistUpper+outsideDist;speed=speed*maxDistUpper/newDist;newDist=maxDistUpper}else if(dist<0&&newDist>maxDistLower){outsideDist=size/(6/(newDist/speed*deceleration));maxDistLower=maxDistLower+outsideDist;speed=speed*maxDistLower/newDist;newDist=maxDistLower}newDist=newDist*(dist<0?-1:1);newTime=speed/deceleration;return{dist:newDist,time:m.round(newTime)}},_offset:function(el){var left=-el.offsetLeft,top=-el.offsetTop;while(el=el.offsetParent){left-=el.offsetLeft;top-=el.offsetTop}if(el!=this.wrapper){left*=this.scale;top*=this.scale}return{left:left,top:top}},_snap:function(x,y){var that=this,i,l,page,time,sizeX,sizeY;page=that.pagesX.length-1;for(i=0,l=that.pagesX.length;i<l;i++){if(x>=that.pagesX[i]){page=i;break}}if(page==that.currPageX&&page>0&&that.dirX<0)page--;x=that.pagesX[page];sizeX=m.abs(x-that.pagesX[that.currPageX]);sizeX=sizeX?m.abs(that.x-x)/sizeX*500:0;that.currPageX=page;page=that.pagesY.length-1;for(i=0;i<page;i++){if(y>=that.pagesY[i]){page=i;break}}if(page==that.currPageY&&page>0&&that.dirY<0)page--;y=that.pagesY[page];sizeY=m.abs(y-that.pagesY[that.currPageY]);sizeY=sizeY?m.abs(that.y-y)/sizeY*500:0;that.currPageY=page;time=m.round(m.max(sizeX,sizeY))||200;return{x:x,y:y,time:time}},_bind:function(type,el,bubble){(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[transform]="";that.hScrollbar=false;that.vScrollbar=false;that._scrollbar("h");that._scrollbar("v");that._unbind(RESIZE_EV,window);that._unbind(START_EV);that._unbind(MOVE_EV,window);that._unbind(END_EV,window);that._unbind(CANCEL_EV,window);if(!that.options.hasTouch){that._unbind("DOMMouseScroll");that._unbind("mousewheel")}if(that.options.useTransition)that._unbind(TRNEND_EV);if(that.options.checkDOMChanges)clearInterval(that.checkDOMTime);if(that.options.onDestroy)that.options.onDestroy.call(that)},refresh:function(){var that=this,offset,i,l,els,pos=0,page=0;if(that.scale<that.options.zoomMin)that.scale=that.options.zoomMin;that.wrapperW=that.wrapper.clientWidth||1;that.wrapperH=that.wrapper.clientHeight||1;that.minScrollY=-that.options.topOffset||0;that.scrollerW=m.round(that.scroller.offsetWidth*that.scale);that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale);that.maxScrollX=that.wrapperW-that.scrollerW;that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY;that.dirX=0;that.dirY=0;if(that.options.onRefresh)that.options.onRefresh.call(that);that.hScroll=that.options.hScroll&&that.maxScrollX<0;that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH);that.hScrollbar=that.hScroll&&that.options.hScrollbar;that.vScrollbar=that.vScroll&&that.options.vScrollbar&&that.scrollerH>that.wrapperH;offset=that._offset(that.wrapper);that.wrapperOffsetLeft=-offset.left;that.wrapperOffsetTop=-offset.top;if(typeof that.options.snap=="string"){that.pagesX=[];that.pagesY=[];els=that.scroller.querySelectorAll(that.options.snap);for(i=0,l=els.length;i<l;i++){pos=that._offset(els[i]);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;that.pagesX[i]=pos.left<that.maxScrollX?that.maxScrollX:pos.left*that.scale;that.pagesY[i]=pos.top<that.maxScrollY?that.maxScrollY:pos.top*that.scale}}else if(that.options.snap){that.pagesX=[];while(pos>=that.maxScrollX){that.pagesX[page]=pos;pos=pos-that.wrapperW;page++}if(that.maxScrollX%that.wrapperW)that.pagesX[that.pagesX.length]=that.maxScrollX-that.pagesX[that.pagesX.length-1]+that.pagesX[that.pagesX.length-1];pos=0;page=0;that.pagesY=[];while(pos>=that.maxScrollY){that.pagesY[page]=pos;pos=pos-that.wrapperH;page++}if(that.maxScrollY%that.wrapperH)that.pagesY[that.pagesY.length]=that.maxScrollY-that.pagesY[that.pagesY.length-1]+that.pagesY[that.pagesY.length-1]}that._scrollbar("h");that._scrollbar("v");if(!that.zoomed){that.scroller.style[transitionDuration]="0";that._resetPos(400)}},scrollTo:function(x,y,time,relative){var that=this,step=x,i,l;that.stop();if(!step.length)step=[{x:x,y:y,time:time,relative:relative}];for(i=0,l=step.length;i<l;i++){if(step[i].relative){step[i].x=that.x-step[i].x;step[i].y=that.y-step[i].y}that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0})}that._startAni()},scrollToElement:function(el,time){var that=this,pos;el=el.nodeType?el:that.scroller.querySelector(el);if(!el)return;pos=that._offset(el);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left;pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top;time=time===undefined?m.max(m.abs(pos.left)*2,m.abs(pos.top)*2):time;that.scrollTo(pos.left,pos.top,time)},scrollToPage:function(pageX,pageY,time){var that=this,x,y;time=time===undefined?400:time;if(that.options.onScrollStart)that.options.onScrollStart.call(that);if(that.options.snap){pageX=pageX=="next"?that.currPageX+1:pageX=="prev"?that.currPageX-1:pageX;pageY=pageY=="next"?that.currPageY+1:pageY=="prev"?that.currPageY-1:pageY;pageX=pageX<0?0:pageX>that.pagesX.length-1?that.pagesX.length-1:pageX;pageY=pageY<0?0:pageY>that.pagesY.length-1?that.pagesY.length-1:pageY;that.currPageX=pageX;that.currPageY=pageY;x=that.pagesX[pageX];y=that.pagesY[pageY]}else{x=-that.wrapperW*pageX;y=-that.wrapperH*pageY;if(x<that.maxScrollX)x=that.maxScrollX;if(y<that.maxScrollY)y=that.maxScrollY}that.scrollTo(x,y,time)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(MOVE_EV,window);this._unbind(END_EV,window);this._unbind(CANCEL_EV,window)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind(TRNEND_EV);else cancelFrame(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(x,y,scale,time){var that=this,relScale=scale/that.scale;if(!that.options.useTransform)return;that.zoomed=true;time=time===undefined?200:time;x=x-that.wrapperOffsetLeft-that.x;y=y-that.wrapperOffsetTop-that.y;that.x=x-x*relScale+that.x;that.y=y-y*relScale+that.y;that.scale=scale;that.refresh();that.x=that.x>0?0:that.x<that.maxScrollX?that.maxScrollX:that.x;that.y=that.y>that.minScrollY?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;that.scroller.style[transitionDuration]=time+"ms";that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px) scale("+scale+")"+translateZ;that.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};function prefixStyle(style){if(vendor==="")return style;style=style.charAt(0).toUpperCase()+style.substr(1);return vendor+style}dummyStyle=null;if(typeof exports!=="undefined")exports.iScroll=iScroll;else window.iScroll=iScroll}(window,document);!function(){var method;var noop=function noop(){};var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var length=methods.length;var console=window.console=window.console||{};while(length--){method=methods[length];if(!console[method]){console[method]=noop}}}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);partials=this.merge(partials,Handlebars.partials);data=data||{};var buffer="",stack1,stack2,functionType="function",escapeExpression=this.escapeExpression,self=this;buffer+='<div class="container viewport main theme-'+escapeExpression((stack1=(stack1=depth0.config,stack1==null||stack1===false?stack1:stack1.themeId),typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\r\n  <div class="wrapper main-wrapper main-wrapper-left">\r\n    <div class="container page main-page-left">\r\n\r\n			';stack2=self.invokePartial(partials["app-header.hbs"],"app-header.hbs",depth0,helpers,partials,data);if(stack2||stack2===0){buffer+=stack2}buffer+="\r\n\r\n			";stack2=self.invokePartial(partials["app-nav.hbs"],"app-nav.hbs",depth0,helpers,partials,data);if(stack2||stack2===0){buffer+=stack2}buffer+='\r\n\r\n      <div class="container viewport sub">\r\n        <div class="wrapper sub-wrapper">\r\n          <div id="sub-page-0" class="container page viewport sub-page" data-loaded="0">\r\n            <div class="wrapper sub-page-wrapper">\r\n            </div>\r\n          </div>\r\n          <div id="sub-page-1" class="container page viewport sub-page" data-loaded="0">\r\n            <div class="wrapper sub-page-wrapper">\r\n            </div>\r\n          </div>\r\n          <div id="sub-page-2" class="container page viewport sub-page" data-loaded="0">\r\n            <div class="wrapper sub-page-wrapper">\r\n            </div>\r\n          </div>\r\n          <div id="sub-page-3" class="container page viewport sub-page" data-loaded="0">\r\n            <div class="wrapper sub-page-wrapper">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="container page main-page-right">\r\n      <div class="container app-header app-header-fixed">\r\n        <button id="back-btn" class="btn app-header-backbtn">返回</button>\r\n        <h1 class="app-header-title">\r\n          ';if(stack2=helpers.title){stack2=stack2.call(depth0,{hash:{},data:data})}else{stack2=depth0.title;stack2=typeof stack2===functionType?stack2.apply(depth0):stack2}buffer+=escapeExpression(stack2)+'\r\n        </h1>\r\n      </div>\r\n      <div class="container viewport app-content">\r\n        <div class="wrapper app-content-wrapper">\r\n\r\n        </div>\r\n      </div>\r\n      <!--<div class="container app-footer app-footer-fixed">\r\n        <h3 class="app-footer-title">\r\n          footer\r\n        </h3>\r\n      </div>-->\r\n    </div>\r\n  </div>\r\n</div>';return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};Handlebars.partials["app-header.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1;buffer+='\r\n<div class="container app-header">\r\n  <h1 class="app-header-title">';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</h1>\r\n</div>\r\n";return buffer}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-header"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-header"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-header"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};Handlebars.partials["app-nav.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1;buffer+='\r\n  <div class="container app-nav">\r\n    <ul class="app-nav-ul">\r\n			';stack1=helpers.each.call(depth0,depth0.children,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n    </ul>\r\n  </div>\r\n";return buffer}function program2(depth0,data){var buffer="",stack1,stack2;buffer+='\r\n        <!-- nav level 1 -->\r\n        <li data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" data-index="'+escapeExpression((stack1=(stack1=data,stack1==null||stack1===false?stack1:stack1.index),typeof stack1===functionType?stack1.apply(depth0):stack1))+'" ';stack2=helpers["if"].call(depth0,depth0.active,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data});if(stack2||stack2===0){buffer+=stack2}buffer+=">\r\n					";if(stack2=helpers.text){stack2=stack2.call(depth0,{hash:{},data:data})}else{stack2=depth0.text;stack2=typeof stack2===functionType?stack2.apply(depth0):stack2}buffer+=escapeExpression(stack2)+"\r\n        </li>\r\n			";return buffer}function program3(depth0,data){return'class="app-nav-active"'}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-nav"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-nav"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-nav"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-newslist.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1,options;buffer+="\r\n	";stack1=helpers["if"].call(depth0,depth0.isall,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n		";options={hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data};if(stack1=helpers.children){stack1=stack1.call(depth0,options)}else{stack1=depth0.children;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers.children){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n	";stack1=helpers["if"].call(depth0,depth0.isall,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n";return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\r\n	<div class="container app-newslist">\r\n	';stack1=helpers["if"].call(depth0,depth0.title,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n  <ul >\r\n	";return buffer}function program3(depth0,data){var buffer="",stack1;buffer+='\r\n      <div class="app-newslist-mtitle">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</div>\r\n	";return buffer}function program5(depth0,data){var buffer="",stack1;buffer+="\r\n\r\n      ";stack1=helpers["if"].call(depth0,depth0.thumb,{hash:{},inverse:self.program(8,program8,data),fn:self.program(6,program6,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n\r\n		";return buffer}function program6(depth0,data){var buffer="",stack1;buffer+='\r\n        <li class="app-newslist-li" data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" data-id="';if(stack1=helpers.id){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.id;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n	        <div class="app-newslist-imgbox">\r\n	            <img src="';if(stack1=helpers.thumb){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumb;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n	        </div>\r\n	        <span class="app-newslist-title">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span>\r\n	        <p class="app-newslist-info">';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</p>\r\n	        <span class="app-newslist-date">';if(stack1=helpers.date){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.date;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\r\n        </li>\r\n      ";return buffer}function program8(depth0,data){var buffer="",stack1;buffer+='\r\n        <li class="app-newslist-li nothumb" data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n	        <span class="app-newslist-title">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span>\r\n	        <span class="app-newslist-date">';if(stack1=helpers.date){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.date;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\r\n        </li>\r\n      ";return buffer}function program10(depth0,data){return'\r\n  </ul>\r\n  <div class="app-newslist-pullUp">\r\n    <span class="app-newslist-pullUpIcon"></span>\r\n    <span class="app-newslist-pullUpLabel">上拉获取更多...</span>\r\n  </div>\r\n  </div>\r\n	'}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-newslist"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-newslist"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-newslist"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};
templates["app-productlist.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1,options;buffer+='\r\n  <div class="container app-productlist">\r\n	  ';stack1=helpers["if"].call(depth0,depth0.title,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n\r\n	";options={hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data};if(stack1=helpers.children){stack1=stack1.call(depth0,options)}else{stack1=depth0.children;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers.children){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n  </div>\r\n";return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\r\n	  <div class="app-productlist-title">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</div>\r\n		";return buffer}function program4(depth0,data){var buffer="",stack1;buffer+='\r\n\r\n    <li class="app-productlist-li" data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n      <div class="app-productlist-imgbox">\r\n        <img src="';if(stack1=helpers.thumb){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumb;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n      </div>\r\n      <span>';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\r\n    </li>\r\n\r\n	";return buffer}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-productlist"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-productlist"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-productlist"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-productlist2.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1,options;buffer+="\r\n	";stack1=helpers["if"].call(depth0,depth0.isall,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n	";options={hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data};if(stack1=helpers.children){stack1=stack1.call(depth0,options)}else{stack1=depth0.children;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers.children){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n	";stack1=helpers["if"].call(depth0,depth0.isall,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n";return buffer}function program2(depth0,data){var buffer="",stack1;buffer+='\r\n    <div class="container app-newslist">\r\n		';stack1=helpers["if"].call(depth0,depth0.title,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n    <ul >\r\n	";return buffer}function program3(depth0,data){var buffer="",stack1;buffer+='\r\n        <div class="app-newslist-mtitle">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</div>\r\n		";return buffer}function program5(depth0,data){var buffer="",stack1;buffer+="\r\n\r\n		";stack1=helpers["if"].call(depth0,depth0.thumb,{hash:{},inverse:self.program(8,program8,data),fn:self.program(6,program6,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n\r\n	";return buffer}function program6(depth0,data){var buffer="",stack1;buffer+='\r\n        <li class="app-newslist-li" data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n          <div class="app-newslist-imgbox">\r\n            <img src="';if(stack1=helpers.thumb){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumb;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n          </div>\r\n          <span class="app-newslist-title">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span>\r\n          <p class="app-newslist-info">';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</p>\r\n          <span class="app-newslist-date">';if(stack1=helpers.date){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.date;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\r\n        </li>\r\n		";return buffer}function program8(depth0,data){var buffer="",stack1;buffer+='\r\n        <li class="app-newslist-li nothumb" data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n          <span class="app-newslist-title">';if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</span>\r\n          <span class="app-newslist-date">';if(stack1=helpers.date){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.date;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\r\n        </li>\r\n		";return buffer}function program10(depth0,data){return'\r\n    </ul>\r\n      <div class="app-newslist-pullUp">\r\n        <span class="app-newslist-pullUpIcon"></span>\r\n        <span class="app-newslist-pullUpLabel">上拉获取更多...</span>\r\n      </div>\r\n    </div>\r\n	'}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-productlist2"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-productlist2"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-productlist2"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-slider.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,self=this,helperMissing=helpers.helperMissing,functionType="function",escapeExpression=this.escapeExpression,blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){var buffer="",stack1,options;buffer+='\r\n  <div class="container app-slider">\r\n    <div class="app-slider-indicator">\r\n      <ul class="indicator">\r\n			  ';stack1=helpers.each.call(depth0,depth0.children,{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data});if(stack1||stack1===0){buffer+=stack1}buffer+='\r\n      </ul>\r\n    </div>\r\n    <div class="container viewport app-slider-viewport">\r\n      <div class="wrapper app-slider-wrapper">\r\n				';options={hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data};if(stack1=helpers.children){stack1=stack1.call(depth0,options)}else{stack1=depth0.children;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers.children){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n      </div>\r\n    </div>\r\n  </div>\r\n";return buffer}function program2(depth0,data){var buffer="",stack1,stack2,options;buffer+="\r\n          <li ";options={hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data};stack2=(stack1=helpers.ifCond||depth0.ifCond,stack1?stack1.call(depth0,(stack1=data,stack1==null||stack1===false?stack1:stack1.index),"==",0,options):helperMissing.call(depth0,"ifCond",(stack1=data,stack1==null||stack1===false?stack1:stack1.index),"==",0,options));if(stack2||stack2===0){buffer+=stack2}buffer+="></li>\r\n			  ";return buffer}function program3(depth0,data){return'class="active"'}function program5(depth0,data){var buffer="",stack1;buffer+='\r\n          <div class="app-slider-item">\r\n            <img src="';if(stack1=helpers.thumb){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.thumb;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n\r\n            <div class="app-slider-item-div" data-url="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n              <span class="app-slider-item-label">';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</span>\r\n            </div>\r\n          </div>\r\n				";return buffer}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-slider"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-slider"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-slider"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-sub-page.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,self=this,functionType="function",blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){return"\r\n"}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-sub-page"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-sub-page"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-sub-page"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["doc-header.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+="<title>";if(stack1=helpers.title){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.title;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'</title>\r\n<meta name="description" content="';if(stack1=helpers.description){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.description;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-content.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var stack1,options,self=this,functionType="function",blockHelperMissing=helpers.blockHelperMissing;function program1(depth0,data){return"\r\n\r\n"}options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data};if(stack1=helpers["app-content"]){stack1=stack1.call(depth0,options)}else{stack1=depth0["app-content"];stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(!helpers["app-content"]){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1||stack1===0){return stack1}else{return""}})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-title.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="app-content-node app-title">\r\n  <h3>\r\n		';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"\r\n  </h3>\r\n</div>\r\n";return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-subtitle.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="app-content-node app-subtitle">\r\n  <span>\r\n	  ';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"\r\n  </span>\r\n</div>\r\n";return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-divider.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};return'<hr class="app-content-node app-divider">'})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-image.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="app-content-node app-image">\r\n  <img src="';if(stack1=helpers.src){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.src;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'" alt="';if(stack1=helpers.alt){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.alt;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">\r\n</div>';return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-text.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function";buffer+='<div class="app-content-node app-text">\r\n  <span>\r\n		';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}if(stack1||stack1===0){buffer+=stack1}buffer+="\r\n  </span>\r\n</div>\r\n";return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-link.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="app-content-node app-link">\r\n  <a href="';if(stack1=helpers.url){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.url;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</a>\r\n</div>";return buffer})}();!function(){var template=Handlebars.template,templates=Handlebars.templates=Handlebars.templates||{};templates["app-phone.hbs"]=template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"];helpers=this.merge(helpers,Handlebars.helpers);data=data||{};var buffer="",stack1,functionType="function",escapeExpression=this.escapeExpression;buffer+='<div class="app-content-node app-phone">\r\n	<div>\r\n    <a href="tel:';if(stack1=helpers.number){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.number;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+'">';if(stack1=helpers.text){stack1=stack1.call(depth0,{hash:{},data:data})}else{stack1=depth0.text;stack1=typeof stack1===functionType?stack1.apply(depth0):stack1}buffer+=escapeExpression(stack1)+"</a>\r\n	</div>\r\n	<hr>\r\n</div>";return buffer})}();var app={win:null,winW:0,winH:0,UPDATE_ALL:"updateAll",UPDATE_ORIENTATION:"updateOrientation",UPDATE_SIZE:"updateSize",UPDATE_SUBPAGE:"updateSubpage",UPDATE_WIDGET:"updateWidget",UPDATE_CONTENT:"updateContent"};$(document).ready(function(){app.init();app.tryHideScrollBar();app.load(app.LOAD_INDEX,"",function(err,result){if(err){return}result.config=_config;app.render(result);app.run()})});app.tryHideScrollBar=function(){window.setTimeout(function(){window.scrollTo(0,0);$("#addressFixBar").remove()},300)};app.getNav=function(navIndex){return $('.app-nav li[data-index="'+navIndex+'"]')};app.getWinWidth=function(){if(app.isIOS()){return window.innerWidth}return app.win.width()};app.getWinHeight=function(){if(app.isIOS()){return window.innerHeight}return app.win.height()};app.isIOS=function(){try{var ua=navigator.userAgent;return/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-9]_[0-9_]* like Mac OS X/i.test(ua)&&ua.indexOf("AppleWebKit")>-1}catch(e){return false}};app.init=function(){app.win=$(window);app.winW=app.getWinWidth();app.winH=app.getWinHeight()};app.run=function(){var body=$("body"),main=$(".main"),mainWrapper=main.find(".main-wrapper"),mainPageLeft=main.find(".main-page-left"),mainPageLeftHeader=mainPageLeft.find(".app-header"),mainPageRight=main.find(".main-page-right"),mainPageRightHeader=mainPageRight.find(".app-header"),mainPageRightFooter=mainPageRight.find(".app-footer"),content=main.find(".app-content"),contentWrapper=content.find(".app-content-wrapper"),sub=$(".sub"),subWrapper=sub.find(".sub-wrapper"),subPage0=sub.find("#sub-page-0"),subPage1=sub.find("#sub-page-1"),subPage2=sub.find("#sub-page-2"),subPage3=sub.find("#sub-page-3"),currentSubPage,subPageWrapper,newslistPullUp,newslistPullUpLabel,newslist,newslistul,newslistli,newslistcon,productlist,productlisttitle,productlistli,productlistimgbox,productlistimg,productlistspan,slider,sliderViewport,sliderWrapper,sliderItem,sliderItemImg,sliderItemDiv,sliderIndicator,loader=$(".app-loader");var winW,winH,currentNavIndex,silderScroll,subScroll,subpageScroll,contentScroll,mainScroll;var initEvent=function(){if(typeof _isoldie!="undefined"&&_isoldie==true)return;document.addEventListener("touchmove",function(e){e.preventDefault()},false);app.win.on("orientationchange",function(event){update(app.UPDATE_ORIENTATION)}).on("resize",function(){console.log("resize",app.getWinWidth(),app.getWinHeight());update(app.UPDATE_SIZE)});$(".app-nav li").click(function(e){var target=$(e.target);showSubPage(Number(target.attr("data-index")),true)});mainScroll=new iScroll(main.get(0),{momentum:false,hScrollbar:false,vScrollbar:false,hScroll:true,vScroll:false,lockDirection:true});mainScroll.disable();$("#back-btn").click(function(e){if(contentScroll){contentScroll.destroy();contentScroll=null;content.find("img").unbind()}loader.hide();mainScroll.scrollTo(-winW,0,500,true);setTimeout(function(){contentWrapper.hide()},500)});subScroll=new iScroll(sub.get(0),{snap:true,momentum:false,lockDirection:true,hScrollbar:false,vScrollbar:false,vScroll:false,hScroll:true,handleClick:false,onScrollEnd:function(){showSubPage(Math.round(Math.abs(this.x/winW)))}})};var update=app.update=function(target){if(target==app.UPDATE_ALL||target==app.UPDATE_SUBPAGE){currentSubPage=$("#sub-page-"+currentNavIndex);subPageWrapper=currentSubPage.find(".sub-page-wrapper")}if(target==app.UPDATE_ALL||target==app.UPDATE_ORIENTATION||target==app.UPDATE_SIZE){app.winW=winW=app.getWinWidth();app.winH=winH=app.getWinHeight();$("html").width(winW);body.width(winW);main.width(winW);main.height(winH);mainWrapper.css("width",winW*2+"px");mainPageLeft.css("width",winW+"px");mainPageRight.css("left",winW+"px").css("width",winW+"px");content.css("top",mainPageRightHeader.height()+"px").css("bottom",(mainPageRightFooter.length>0?mainPageRightFooter.height():0)+"px");subWrapper.css("width",winW*4+"px");subPage0.css("left",0).css("width",winW+"px");subPage1.css("left",winW+"px").css("width",winW+"px");subPage2.css("left",winW*2+"px").css("width",winW+"px");subPage3.css("left",winW*3+"px").css("width",winW+"px");if(winW<winH){main.removeClass("main-landscape").addClass("main-portrait")}else{main.removeClass("main-portrait").addClass("main-landscape")}}if(target==app.UPDATE_ALL||target==app.UPDATE_SUBPAGE){slider=currentSubPage.find(".app-slider");if(slider.length>0){sliderViewport=slider.find(".app-slider-viewport");sliderWrapper=slider.find(".app-slider-wrapper");sliderItem=slider.find(".app-slider-item");sliderItemImg=slider.find("img");sliderItemDiv=slider.find(".app-slider-item-div");sliderIndicator=slider.find(".app-slider-indicator")}newslist=currentSubPage.find(".app-newslist");if(newslist.length>0){newslistul=newslist.find("ul");newslistli=newslist.find("li");newslistPullUp=currentSubPage.find(".app-newslist-pullUp");newslistPullUpLabel=currentSubPage.find(".app-newslist-pullUpLabel")}productlist=currentSubPage.find(".app-productlist");if(productlist.length>0){productlistli=productlist.find("li");productlisttitle=productlist.find(".app-productlist-title");productlistimgbox=productlist.find(".app-productlist-imgbox");productlistimg=productlist.find("img");productlistspan=productlist.find("span")}}if(target==app.UPDATE_ALL||target==app.UPDATE_ORIENTATION||target==app.UPDATE_SIZE||target==app.UPDATE_SUBPAGE){if(slider.length>0){sliderWrapper.css("width",winW*sliderItem.length+"px");sliderItem.css("width",winW+"px");sliderItemDiv.css("width",winW+"px");sliderItemImg.css("max-width",winW+"px");sliderIndicator.css("z-index",Number(sliderIndicator.css("z-index"))+1)}if(productlist.length>0){var ptop,pleft,pright,pbottom,pm1,pm2,pw,ph,pimgh,plevel;ptop=productlisttitle?40:10;pbottom=pm2=10;pw=Math.round(winW*.8/3);pimgh=Math.round(pw*.8);pleft=pright=pm1=Math.floor(winW*.2/4);productlistimg.css("max-width",pw+"px").css("max-height",pimgh+"px").css("_width",pw+"px").css("_height",pimgh+"px");productlistimgbox.css("width",pw+"px").css("height",pimgh+"px").css("line-height",pimgh+"px");ph=productlistspan.height()+pimgh;productlistli.each(function(index){var elem=$(this);plevel=Math.floor(index/3);elem.css("top",ptop+plevel*(ph+pm2)+"px").css("left",pleft+(pw+pm1)*(index%3)+"px").css("width",pw+"px")});productlist.css("height",ptop+pbottom+ph*2+pm2)}}if(target==app.UPDATE_ALL||target==app.UPDATE_SIZE||target==app.UPDATE_SUBPAGE||target==app.UPDATE_WIDGET){var tempHeight=0;subPageWrapper.children().each(function(index){var elem=$(this);elem.css("top",tempHeight+"px");tempHeight+=elem.outerHeight()});subPageWrapper.css("height",tempHeight+"px")}if(target==app.UPDATE_ALL||target==app.UPDATE_CONTENT){var tempHeight=0;contentWrapper.children().each(function(index){var elem=$(this);elem.css("top",tempHeight+"px");tempHeight+=elem.outerHeight()});contentWrapper.css("height",tempHeight+"px")}if(typeof _isoldie!="undefined"&&_isoldie==true){if(newslist){newslist.find("span").css("width",winW-100+"px");newslist.find("p").css("width",winW-100+"px")}if(sub){sub.css("height",winH+"px")}return}if(target==app.UPDATE_ALL||target==app.UPDATE_SUBPAGE){subpageScroll&&subpageScroll.destroy();subpageScroll=new iScroll(currentSubPage.get(0),{useTransition:false,lockDirection:true,hScrollbar:false,vScrollbar:true,hScroll:false,vScroll:true,onRefresh:function(){if(newslistPullUp.hasClass("app-newslist-loading")){newslistPullUp.removeClass("app-newslist-loading");newslistPullUpLabel.html("上拉加载更多...")}},onScrollMove:function(){if(this.y<this.maxScrollY-5&&!newslistPullUp.hasClass("app-newslist-flip")){newslistPullUp.addClass("app-newslist-flip");newslistPullUpLabel.html("松开立即加载...")}else if(this.y>this.maxScrollY+5&&newslistPullUp.hasClass("app-newslist-flip")){newslistPullUp.removeClass("app-newslist-flip");newslistPullUpLabel.html("上拉加载更多...");this.maxScrollY=newslistPullUp.height()}},onScrollEnd:function(){if(newslistPullUp.hasClass("app-newslist-flip")){newslistPullUp.removeClass("app-newslist-flip");newslistPullUp.addClass("app-newslist-loading");newslistPullUpLabel.html("正在加载...");if(currentNavIndex==0||currentNavIndex==2){app.load(app.LOAD_MORENEWS,newslistli.last().attr("data-id"),function(err,result){if(err){subpageScroll.refresh();return}newslistul.html(newslistul.html()+app.renderNewslist(result,true));update(app.UPDATE_WIDGET);subpageScroll.refresh()})}else if(currentNavIndex==1){app.load(app.LOAD_MOREPRODUCTS,newslistli.last().attr("data-id"),function(err,result){if(err){subpageScroll.refresh();return}newslistul.html(newslistul.html()+app.renderNewslist(result,true));update(app.UPDATE_WIDGET);subpageScroll.refresh()})}}}});silderScroll&&silderScroll.destroy();if(sliderViewport&&sliderViewport.length>0){silderScroll=new iScroll(sliderViewport.get(0),{snap:true,hScrollbar:false,momentum:false,vScrollbar:false,hScroll:true,vScroll:false,lockDirection:true,stopEventProp:true,onScrollEnd:function(){$(".app-slider-indicator li.active").removeClass("active");$(".app-slider-indicator li:nth-child("+(this.currPageX+1)+")").addClass("active")}})}var renderMainScroll=function(url,backbtnLabel){$("#back-btn").text(backbtnLabel||"返回");mainScroll.scrollTo(winW,0,500,true);setTimeout(function(){loader.show();app.load(app.LOAD_DATA,url,function(err,result){if(err){return}loader.hide();app.renderContent(result);contentWrapper.show();update(app.UPDATE_CONTENT);contentScroll=new iScroll(content.get(0),{useTransition:true,momentum:true,lockDirection:true,hScrollbar:false,vScrollbar:true,vScroll:true,hScroll:false});content.find("img").on("load",function(){app.update(app.UPDATE_CONTENT);contentScroll.refresh()})})},500)};if(productlistli){productlistli.unbind();productlistli.on("touchstart",function(e){var target=$(e.currentTarget);target.on("touchmove",function(e){target.unbind("touchmove");target.unbind("touchend")});target.on("touchend",function(e){renderMainScroll(target.attr("data-url"),app.getNav(currentNavIndex).text().trim())})});productlistli.mousedown(function(e){var target=$(e.currentTarget);target.mousemove(function(e){target.unbind("mousemove");target.unbind("mouseup")});target.mouseup(function(e){renderMainScroll(target.attr("data-url"),app.getNav(currentNavIndex).text().trim())})})}if(newslistli){newslistli.unbind();newslistli.on("touchstart",function(e){var target=$(e.currentTarget);target.on("touchmove",function(e){target.unbind("touchmove");target.unbind("touchend")});target.on("touchend",function(e){renderMainScroll(target.attr("data-url"),app.getNav(currentNavIndex).text().trim())})});newslistli.mousedown(function(e){var target=$(e.currentTarget);target.mousemove(function(e){target.unbind("mousemove");target.unbind("mouseup")});target.mouseup(function(e){renderMainScroll(target.attr("data-url"),app.getNav(currentNavIndex).text().trim())})})}}};var showSubPage=function(targetIndex,transition){if(currentNavIndex==undefined){currentNavIndex=targetIndex;update(app.UPDATE_ALL);return}if(currentNavIndex==targetIndex){return}if(transition){subScroll.scrollTo(winW*(targetIndex-currentNavIndex),0,500,true)}currentNavIndex=targetIndex;var targetSubPage=$("#sub-page-"+targetIndex);$(".app-nav .app-nav-active").removeClass("app-nav-active");var dataUrl=app.getNav(targetIndex).addClass("app-nav-active").attr("data-url");loader.hide();if(targetSubPage.attr("data-loaded")!="1"){loader.show();app.load(app.LOAD_DATA,dataUrl,function(err,result){if(err){return}loader.hide();app.renderSubPage(targetIndex,result);update(app.UPDATE_SUBPAGE)})}else{update(app.UPDATE_SUBPAGE)}targetSubPage.show()};loader.hide();showSubPage(0);initEvent()};app.render=function(thedata){var commonRender=function(data){var result="";for(i=0;i<data.content.length;i++){var elem=data.content[i];switch(elem.t){case"title":result+=Handlebars.templates["app-title.hbs"](elem);break;case"subtitle":result+=Handlebars.templates["app-subtitle.hbs"](elem);break;case"divider":result+=Handlebars.templates["app-divider.hbs"](elem);break;case"image":result+=Handlebars.templates["app-image.hbs"](elem);break;case"text":result+=Handlebars.templates["app-text.hbs"](elem);break;case"link":result+=Handlebars.templates["app-link.hbs"](elem);break;case"phone":result+=Handlebars.templates["app-phone.hbs"](elem);break;case"slider":result+=Handlebars.templates["app-slider.hbs"](elem);break;case"newslist":result+=Handlebars.templates["app-newslist.hbs"](elem);break;case"productlist":if(data.pageType=="subpage0"){result+=Handlebars.templates["app-productlist.hbs"](elem)}else if(data.pageType=="subpage1"){result+=Handlebars.templates["app-newslist.hbs"](elem)}break}}return result};Handlebars.registerHelper("app-header",function(options){for(i=0;i<this.content.length;i++){var elem=this.content[i];if(elem.t=="header"){return options.fn(elem)}}});Handlebars.registerHelper("app-slider",function(options){return options.fn(this)});Handlebars.registerHelper("app-nav",function(options){for(i=0;i<this.content.length;i++){var elem=this.content[i];if(elem.t=="nav"){return options.fn(elem)}}});Handlebars.registerHelper("app-content",function(options){return commonRender(this)});Handlebars.registerHelper("app-sub-page",function(options){return commonRender(this)});Handlebars.registerHelper("app-productlist",function(options){return options.fn(this)});Handlebars.registerHelper("app-newslist",function(options){if(this.isall==undefined){this.isall=true}return options.fn(this)});app.renderHeader(thedata);app.renderApp(thedata);app.renderSubPage(0,thedata)};app.renderHeader=function(data){$("head").prepend($(Handlebars.templates["doc-header.hbs"](data)))};app.renderApp=function(data){$("body").prepend($(Handlebars.templates["app.hbs"](data)))};app.renderSubPage=function(pageIndex,data){data.pageType="subpage"+pageIndex;$("#sub-page-"+pageIndex+"").attr("data-loaded","1").find(".sub-page-wrapper").html(Handlebars.templates["app-sub-page.hbs"](data))
};app.renderNewslist=function(data,partial){if(partial){data.isall=false}else{data.isall=true}return Handlebars.templates["app-newslist.hbs"](data)};app.renderContent=function(data){data.pageType="content";$(".app-content-wrapper").html(Handlebars.templates["app-content.hbs"](data))};app.LOAD_INDEX="loadIndex";app.LOAD_NEWS="loadNews";app.LOAD_PRODUCTS="loadProducts";app.LOAD_ABOUT="loadAbout";app.LOAD_MORENEWS="loadMoreNews";app.LOAD_MOREPRODUCTS="loadMoreProducts";app.LOAD_ONENEWS="loadOneNews";app.LOAD_ONEPRODUCT="loadOneProduct";app.LOAD_DATA="loadData";app.load=function(loadType,path,callback){var _queryw="";switch(loadType){case app.LOAD_INDEX:app._doload(_SERVER+_indexPath+_queryw,callback);break;case app.LOAD_MORENEWS:app._doload(_SERVER+_morenews+path+_queryw,callback);break;case app.LOAD_MOREPRODUCTS:app._doload(_SERVER+_moreproducts+path+_queryw,callback);break;case app.LOAD_DATA:app._doload(_SERVER+path+_queryw,callback);break}};app._doload=function(path,callback){$.ajax({type:"GET",url:path,dataType:"json"}).success(function(data){if(!data||!data.ret||!data.data){return callback("数据加载失败.")}callback(null,data.data)}).error(function(jqXHR,textStatus,errorThrown){callback("数据加载失败.")})};